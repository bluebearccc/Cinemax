<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" th:href="@{/customer-static/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/all.min.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/animate.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/flaticon.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/magnific-popup.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/odometer.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/owl.carousel.min.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/owl.theme.default.min.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/nice-select.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/main.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/common/footer-area.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/theater-detail.css}">
    <link rel="stylesheet" th:href="@{/customer-static/css/common/header-area.css}">

    <link rel="shortcut icon" th:href="@{/customer-static/images/logo/logo.png}" type="image/x-icon">
    <title th:text="${currentTheater.theaterName}"></title>
</head>

<body>
<!-- ==========Preloader========== -->
<div th:replace="common/fragments/preloader :: preloader">
</div>
<!-- ==========Preloader========== -->
<!-- ==========Overlay========== -->
<a href="#0" class="scrollToTop">
    <i class="fas fa-angle-up"></i>
</a>
<!-- ==========Overlay========== -->
<!-- ==========Header-Section========== -->
<header th:replace="common/fragments/header :: header-section">
</header>
<!-- ==========Header-Section========== -->
<div class="floating-shapes">
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
</div>
<div class="hero-banner" th:style="'background-image:url(' + @{${currentTheater.image}} + ');'">
    <div class="hero-content">
        <h1 class="theater-name" th:text="${currentTheater.theaterName}"></h1>
        <div class="theater-address">
            <span th:text="${currentTheater.address}"></span>
        </div>
        <div class="theater-rating">
            <span class="rating-stars">‚≠ê</span>
            <span class="rating-score" th:text="${currentTheater.serviceRate}"></span>
            <span style="color: #b0bec5;" th:text="'(' + ${currentTheater.numberOfRate} + ' rates)'"></span>
        </div>
    </div>
</div>

<div class="container custom-container">
    <main class="main-content-theater">
        <!-- Address -->
        <section class="address-section">
            <h2 style="margin-bottom: 1.5rem;" class="section-title">
                <i class="fas fa-map-marker-alt"></i> ƒê·ªãa ch·ªâ & Li√™n h·ªá
            </h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <div>
                    <h4 style="margin-bottom: 1rem; color: #667eea;">
                        <i class="fas fa-location-dot"></i> ƒê·ªãa ch·ªâ
                    </h4>
                    <p style="font-size: 1.1rem; line-height: 1.8;" th:text="${currentTheater.address}">
                    </p>
                </div>
            </div>

            <div class="map-container">
                <div style="text-align: center; color: #666;">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3723.1895375281338!2d105.82458481085317!3d21.06509078644878!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135ab4eb02c0c1b%3A0xbaf2e9f55083ee1b!2zQ0dWIFh1w6JuIERp4buHdQ!5e0!3m2!1svi!2s!4v1750473616773!5m2!1svi!2s" height="300px" width="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            </div>
        </section>

        <div class="container book-movie-area">
            <h2 class="section-title">Book Movie Tickets</h2>

            <div class="booking-container">
                <div class="schedule-section">
                    <div class="schedule-header">
                        <div class="button-container">
                            <div th:class="(${roomType.toLowerCase()} == 'single') ? 'custom-button-item active' : 'custom-button-item'">
                                <i class="fas fa-user"></i><span>Single</span>
                            </div>

                            <div th:class="(${roomType.toLowerCase()} == 'couple') ? 'custom-button-item active' : 'custom-button-item'">
                                <i class="fas fa-user-friends"></i><span>Couple</span>
                            </div>
                        </div>
                    </div>

                    <div class="date-selector" id="date-selector">
                        <!-- Dates will be generated by JavaScript -->
                    </div>

                    <div class="movie-listbook-session" id="movie-listbook-session">
                        <div class="empty-state" th:if="${#lists.isEmpty(theaterMovies.content)}">
                            <div class="empty-icon">üòî</div>
                            <h3>Oops, no showtimes found.</h3>
                            <p>Please try selecting another date.</p>
                        </div>
                        <div class="movie-cardbook-session" th:each="movie : ${theaterMovies.content}">
                            <div class="movie-infobook-session">
                                <img class="movie-posterbook-session"
                                     th:src="@{${movie.image}}">
                                <div class="movie-details">
                                    <h4 th:text="${movie.movieName}"></h4>
                                    <div class="movie-meta" style="align-items: baseline">
                                        <i class="far fa-clock"></i>
                                        <span th:text="${movie.duration} + ' minutes'"></span>
                                        <span class="movie-genrebook-session" th:each="genre : ${movie.genres}"
                                              th:text="${genre.genreName}"></span>
                                    </div>
                                    <div class="movie-ratingbook-session">
                                        <i class="fas fa-star"></i><span th:text="${movie.movieRate}"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="showtimes">
                                <button th:each="schedule : ${movie.schedules}"
                                        th:disabled="${schedule.numberOfSeatsRemain == 0}"
                                        th:class="${schedule.numberOfSeatsRemain == 0} ? 'showtime-btn out-of-slot' : 'showtime-btn'">
                            <span class="time-slot"
                                  th:text="${#temporals.format(schedule.startTime, 'HH:mm') + ' - ' + #temporals.format(schedule.endTime, 'HH:mm')}"></span>
                                    <span th:class="${schedule.numberOfSeatsRemain == 0} ? 'rem-seat out-of-seat' : 'rem-seat'"
                                          th:text="${schedule.numberOfSeatsRemain} + ' seat' + (${schedule.numberOfSeatsRemain > 1} ? 's' : '') + ' available'">
                            </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="sidebar">
        <h3 class="sidebar-title">Now Showing</h3>
        <div class="recommended-movie" th:each="recommnedMovie : ${top5movies.content}"
             th:onclick="|window.location.href='/customer/movie-detail?movieId=${recommnedMovie.movieID}'|">
            <div class="recommended-poster">
                <img class="img-poster" th:src="${recommnedMovie.image}">
            </div>
            <div class="recommended-info">
                <h4 th:text="${recommnedMovie.movieName}"></h4>
                <div class="recommended-rating">
                    <i class="fas fa-star"></i>
                    <span th:text="${recommnedMovie.movieRate}"></span>
                </div>
                <div class="recommended-rating" style="color: rgba(255,255,255,0.73)">
                    <i class="fas fa-clock"></i>
                    <span th:text="${recommnedMovie.duration} + ' minutes'"></span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ==========Footer-Section========== -->
<footer class="footer-section" th:replace="common/fragments/footer :: footer">
</footer>
<!-- ==========Footer-Section========== -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:src="@{/customer-static/js/theater-detail.js}"></script>
<script th:src="@{/customer-static/js/jquery-3.3.1.min.js}"></script>
<script th:src="@{/customer-static/js/modernizr-3.6.0.min.js}"></script>
<script th:src="@{/customer-static/js/plugins.js}"></script>
<script th:src="@{/customer-static/js/bootstrap.min.js}"></script>
<script th:src="@{/customer-static/js/isotope.pkgd.min.js}"></script>
<script th:src="@{/customer-static/js/magnific-popup.min.js}"></script>
<script th:src="@{/customer-static/js/owl.carousel.min.js}"></script>
<script th:src="@{/customer-static/js/wow.min.js}"></script>
<script th:src="@{/customer-static/js/countdown.min.js}"></script>
<script th:src="@{/customer-static/js/odometer.min.js}"></script>
<script th:src="@{/customer-static/js/viewport.jquery.js}"></script>
<script th:src="@{/customer-static/js/main.js}"></script>
</body>

</html>