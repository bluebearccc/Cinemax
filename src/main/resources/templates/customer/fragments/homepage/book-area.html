<div class="container book-movie-area" th:fragment="book-movie-area">
    <h1 class="page-title">Book Movie Tickets</h1>

    <div class="booking-container">
        <div class="cinema-list">
            <h3>Select Cinema</h3>
            <div th:class="${theater.getTheaterID() == currentTheater.theaterID} ? 'cinema-item active' : 'cinema-item'"
                 th:each="theater : ${theaters}">
                <input type="hidden" th:value="${theater.theaterID}">
                <div class="cinema-logo">CGV</div>
                <div>
                    <div th:text="${theater.theaterName}"></div>
                </div>
            </div>

        </div>

        <div class="schedule-section">
            <div class="schedule-header">
                <div>
                    <h2 class="schedule-title" th:text="'Movie Schedule at ' + ${currentTheater.theaterName}"></h2>
                    <p class="cinema-address" th:text="${currentTheater.address}"></p>
                </div>
            </div>

            <div class="date-selector" id="date-selector">
                <!-- Dates will be generated by JavaScript -->
            </div>

            <div class="movie-listbook-session" id="movie-listbook-session">
                <div class="empty-state" th:if="${#lists.isEmpty(theaterMovies)}">
                    <div class="empty-icon">ðŸ˜”</div>
                    <h3>Oops, no showtimes found.</h3>
                    <p>Please try selecting another date.</p>
                </div>
                <div class="movie-cardbook-session" th:each="movie : ${theaterMovies}">
                    <div class="movie-infobook-session">
                        <img class="movie-posterbook-session"
                             th:src="@{${movie.image}}">
                        <div class="movie-details">
                            <h4 th:text="${movie.movieName}"></h4>
                            <div class="movie-meta" style="align-items: baseline">
                                <i class="far fa-clock"></i>
                                <span th:text="${movie.duration} + ' minutes'"></span>
                                <span class="movie-genrebook-session" th:each="genre : ${movie.genres}"
                                      th:text="${genre.genreName}"></span>
                            </div>
                            <div class="movie-ratingbook-session">
                                <i class="fas fa-star"></i><span th:text="${movie.movieRate}"></span>
                            </div>
                        </div>
                    </div>
                    <div class="showtimes">
                        <button class="showtime-btn"
                                th:each="schedule : ${movie.schedules}"
                                th:text="${#dates.format(schedule.startTime, 'HH:mm')} + ' - ' + ${#dates.format(schedule.endTime, 'HH:mm')}">
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>